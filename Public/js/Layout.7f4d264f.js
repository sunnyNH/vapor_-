import{_ as P}from"./_plugin-vue_export-helper.d6168fc5.js";/* empty css                     *//* empty css                  */import"./el-tooltip.4ed993c7.js";import{d as h,r as q,t as I,o as F,v as f,w as t,m as b,x as G,u as J,y as O,z as K,g as p,e,b as l,h as a,A as E,B as Q,C as W,D as X,F as j,i as m,G as Y,k as i,H as g,I as Z,J as ee,K as te,L as ne,M as oe,N as se,O as le,P as ae,Q as re,R as ue,S as de,T as _e,U as ie,V as ce,W as fe,X as pe}from"./main.5e21a3e6.js";import{g as me,a as ge}from"./auth.2a6d7dc6.js";/* empty css                   *//* empty css                   */const ve={class:"header-content"},we={class:"breadcrumb"},xe={class:"user-info"},ye={class:"user-dropdown"},Ie={class:"username"},be={class:"phone-info"},Ee=h({__name:"Layout",setup(Me){const d=J(),M=O(),r=q({}),B={"data-overview":"全局数据动态","trend-analysis":"推荐/搜索热度趋势","content-list":"内容列表/榜单","content-detail-query":"单个内容明细查询","creator-list":"创作者列表","user-management":"用户管理"},v=I(()=>M.name),S=I(()=>B[v.value]||""),D=s=>{d.push(`/${s}`)},k=async s=>{s==="logout"?await C():s==="profile"&&N()},C=async()=>{try{await ge(),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),b.success("退出成功"),d.push("/login")}catch(s){console.error("退出失败:",s),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),d.push("/login")}},N=()=>{const s=r.value,n=`
    <div style="text-align: left;">
      <p><strong>手机号：</strong>${s.phone}</p>
      <p><strong>用户名：</strong>${s.name||"未设置"}</p>
      <p><strong>性别：</strong>${s.gender===1?"男":s.gender===2?"女":"未设置"}</p>
      <p><strong>年龄：</strong>${s.age||"未设置"}</p>
      <p><strong>地址：</strong>${s.address||"未设置"}</p>
      <p><strong>简介：</strong>${s.overview||"未设置"}</p>
    </div>
  `;te.alert(n,"个人信息",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定"})},$=async()=>{var s,n;try{const o=await me();o.status?(r.value=o.data,localStorage.setItem("userInfo",JSON.stringify(r.value))):(console.error("获取用户信息失败:",o.error),((s=o.error)!=null&&s.includes("401")||(n=o.error)!=null&&n.includes("Unauthorized"))&&(b.error("登录已过期，请重新登录"),d.push("/login")))}catch(o){console.error("获取用户信息失败:",o)}};return F(()=>{$()}),(s,n)=>{const o=ne,u=oe,_=se,L=le,R=ae,w=re,U=ue,x=de,c=_e,z=ie,A=ce,H=fe,T=K("router-view"),V=pe,y=G;return p(),f(y,{class:"layout-container"},{default:t(()=>[e(R,{width:"260px",class:"sidebar"},{default:t(()=>[n[10]||(n[10]=l("div",{class:"logo"},"运营管理后台",-1)),e(L,{"default-active":v.value,class:"sidebar-menu","background-color":"transparent","text-color":"#B4B7BD","active-text-color":"#ffffff",onSelect:D},{default:t(()=>[e(_,{index:"1"},{title:t(()=>[e(o,null,{default:t(()=>[e(a(E))]),_:1}),n[0]||(n[0]=l("span",null,"流量监控",-1))]),default:t(()=>[e(u,{index:"data-overview"},{default:t(()=>[e(o,null,{default:t(()=>[e(a(Q))]),_:1}),n[1]||(n[1]=l("span",null,"全局数据动态",-1))]),_:1,__:[1]}),e(u,{index:"trend-analysis"},{default:t(()=>[e(o,null,{default:t(()=>[e(a(E))]),_:1}),n[2]||(n[2]=l("span",null,"推荐/搜索热度趋势",-1))]),_:1,__:[2]})]),_:1}),e(_,{index:"2"},{title:t(()=>[e(o,null,{default:t(()=>[e(a(W))]),_:1}),n[3]||(n[3]=l("span",null,"内容管理",-1))]),default:t(()=>[e(u,{index:"content-list"},{default:t(()=>[e(o,null,{default:t(()=>[e(a(X))]),_:1}),n[4]||(n[4]=l("span",null,"内容列表/榜单",-1))]),_:1,__:[4]}),e(u,{index:"content-detail-query"},{default:t(()=>[e(o,null,{default:t(()=>[e(a(j))]),_:1}),n[5]||(n[5]=l("span",null,"单个内容明细查询",-1))]),_:1,__:[5]})]),_:1}),e(_,{index:"3"},{title:t(()=>[e(o,null,{default:t(()=>[e(a(m))]),_:1}),n[6]||(n[6]=l("span",null,"创作者管理",-1))]),default:t(()=>[e(u,{index:"creator-list"},{default:t(()=>[e(o,null,{default:t(()=>[e(a(m))]),_:1}),n[7]||(n[7]=l("span",null,"创作者列表",-1))]),_:1,__:[7]})]),_:1}),e(_,{index:"5"},{title:t(()=>[e(o,null,{default:t(()=>[e(a(Y))]),_:1}),n[8]||(n[8]=l("span",null,"系统管理",-1))]),default:t(()=>[e(u,{index:"user-management"},{default:t(()=>[e(o,null,{default:t(()=>[e(a(m))]),_:1}),n[9]||(n[9]=l("span",null,"用户管理",-1))]),_:1,__:[9]})]),_:1})]),_:1},8,["default-active"])]),_:1,__:[10]}),e(y,null,{default:t(()=>[e(H,{class:"header"},{default:t(()=>[l("div",ve,[l("div",we,[e(U,{separator:"/"},{default:t(()=>[e(w,null,{default:t(()=>n[11]||(n[11]=[i("首页",-1)])),_:1,__:[11]}),e(w,null,{default:t(()=>[i(g(S.value),1)]),_:1})]),_:1})]),l("div",xe,[e(A,{onCommand:k},{dropdown:t(()=>[e(z,null,{default:t(()=>[e(c,null,{default:t(()=>[l("span",be,g(r.value.phone),1)]),_:1}),e(c,{divided:"",command:"profile"},{default:t(()=>n[12]||(n[12]=[i("个人信息",-1)])),_:1,__:[12]}),e(c,{command:"logout"},{default:t(()=>n[13]||(n[13]=[i("退出登录",-1)])),_:1,__:[13]})]),_:1})]),default:t(()=>[l("span",ye,[r.value.avatar?(p(),f(x,{key:0,size:32,src:r.value.avatar},null,8,["src"])):(p(),f(x,{key:1,size:32,icon:a(Z)},null,8,["icon"])),l("span",Ie,g(r.value.name||"未知用户"),1),e(o,null,{default:t(()=>[e(a(ee))]),_:1})])]),_:1})])])]),_:1}),e(V,{class:"main-content"},{default:t(()=>[e(T)]),_:1})]),_:1})]),_:1})}}});const Re=P(Ee,[["__scopeId","data-v-fce0618f"]]);export{Re as default};
