import{_ as ee}from"./_plugin-vue_export-helper.d6168fc5.js";/* empty css                        *//* empty css                  *//* empty css                   *//* empty css                       *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                    */import"./el-tooltip.4ed993c7.js";/* empty css               *//* empty css                     */import{d as ae,a as P,r as p,o as te,c as le,b as S,e as a,w as t,aa as oe,v as z,m as i,a0 as ne,ag as se,ah as re,a9 as ue,aj as ie,g as C,k as n,h as de,aq as pe,H as R,ak as me,K as $,n as _e,p as ce,a3 as fe,a4 as ge,s as ve,E as ye,a6 as we,L as be,ad as Ve,af as Ce,ar as ke,a8 as Te}from"./main.5e21a3e6.js";/* empty css                   */const Ee={class:"user-management"},he={class:"page-header"},xe={class:"pagination-container"},Ue=ae({__name:"UserManagement",setup(Be){const r=P({phone:"",name:"",status:""}),k=p([]),y=p(!1),v=p(1),w=p(10),T=p(0),_=p(!1),c=p("add"),b=p(),s=P({phone:"",name:"",password:"",roleType:2}),F={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}]},f=async()=>{y.value=!0;try{await new Promise(o=>setTimeout(o,500)),k.value=[{id:1,name:"张三",phone:"13800138000",roleType:1,roleName:"超级管理员",status:1},{id:2,name:"李四",phone:"13800138001",roleType:2,roleName:"普通管理员",status:1}],T.value=2}catch(o){console.error("获取用户列表失败:",o),i.error("获取用户列表失败")}finally{y.value=!1}},E=()=>{v.value=1,f()},N=()=>{r.phone="",r.name="",r.status="",E()},M=()=>{c.value="add",Object.assign(s,{phone:"",name:"",password:"",roleType:2}),_.value=!0},j=o=>{c.value="edit",Object.assign(s,{id:o.id,phone:o.phone,name:o.name,roleType:o.roleType}),_.value=!0},q=async o=>{if(o.roleType===1){i.warning("超级管理员默认拥有所有权限，无需设置");return}i.info("权限设置功能开发中...")},D=async o=>{try{await $.confirm("确定要重置该用户的密码吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await new Promise(e=>setTimeout(e,300)),i.success("密码重置成功")}catch(e){e!=="cancel"&&(console.error("重置密码失败:",e),i.error("重置密码失败"))}},I=async()=>{if(b.value)try{if(!await b.value.validate())return;await new Promise(e=>setTimeout(e,300)),i.success(c.value==="add"?"添加成功":"编辑成功"),_.value=!1,f()}catch(o){console.error("提交表单失败:",o),i.error("操作失败")}},L=o=>{w.value=o,f()},O=o=>{v.value=o,f()},A=async o=>{try{const e=o.status===1?"禁用":"启用";await $.confirm(`确定要${e}该用户吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await new Promise(m=>setTimeout(m,300)),i.success(`${e}成功`),o.status=o.status===1?0:1}catch(e){e!=="cancel"&&(console.error("更改用户状态失败:",e),i.error("操作失败"))}};return te(()=>{f()}),(o,e)=>{const m=_e,d=ce,h=fe,G=ge,u=ve,x=ye,U=we,H=be,K=ne,g=Ve,J=Ce,Q=se,W=re,B=ke,X=Te,Y=ue,Z=ie;return C(),le("div",Ee,[S("div",he,[a(K,{gutter:20,type:"flex",justify:"space-between",align:"middle"},{default:t(()=>[a(U,{span:16},{default:t(()=>[a(x,{inline:!0,model:r,class:"search-form"},{default:t(()=>[a(d,{label:"手机号"},{default:t(()=>[a(m,{modelValue:r.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>r.phone=l),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"用户名"},{default:t(()=>[a(m,{modelValue:r.name,"onUpdate:modelValue":e[1]||(e[1]=l=>r.name=l),placeholder:"请输入用户名",clearable:""},null,8,["modelValue"])]),_:1}),a(d,{label:"状态"},{default:t(()=>[a(G,{modelValue:r.status,"onUpdate:modelValue":e[2]||(e[2]=l=>r.status=l),placeholder:"请选择状态",clearable:""},{default:t(()=>[a(h,{label:"启用",value:"1"}),a(h,{label:"禁用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),a(d,null,{default:t(()=>[a(u,{type:"primary",onClick:E},{default:t(()=>e[11]||(e[11]=[n("搜索",-1)])),_:1,__:[11]}),a(u,{onClick:N},{default:t(()=>e[12]||(e[12]=[n("重置",-1)])),_:1,__:[12]})]),_:1})]),_:1},8,["model"])]),_:1}),a(U,{span:8,style:{"text-align":"right"}},{default:t(()=>[a(u,{type:"primary",onClick:M},{default:t(()=>[a(H,null,{default:t(()=>[a(de(pe))]),_:1}),e[13]||(e[13]=n("新增用户 ",-1))]),_:1,__:[13]})]),_:1})]),_:1})]),oe((C(),z(Q,{data:k.value,style:{width:"100%","margin-top":"20px"}},{default:t(()=>[a(g,{prop:"name",label:"用户名","min-width":"120"}),a(g,{prop:"phone",label:"手机号","min-width":"120"}),a(g,{prop:"roleName",label:"角色","min-width":"120"}),a(g,{prop:"status",label:"状态",width:"100"},{default:t(l=>[a(J,{type:l.row.status===1?"success":"danger"},{default:t(()=>[n(R(l.row.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),a(g,{label:"操作",width:"250",fixed:"right"},{default:t(l=>[a(u,{type:"primary",link:"",onClick:V=>j(l.row)},{default:t(()=>e[14]||(e[14]=[n("编辑",-1)])),_:2,__:[14]},1032,["onClick"]),a(u,{type:"primary",link:"",onClick:V=>q(l.row)},{default:t(()=>e[15]||(e[15]=[n("权限设置",-1)])),_:2,__:[15]},1032,["onClick"]),a(u,{type:l.row.status===1?"danger":"success",link:"",onClick:V=>A(l.row)},{default:t(()=>[n(R(l.row.status===1?"禁用":"启用"),1)]),_:2},1032,["type","onClick"]),a(u,{type:"primary",link:"",onClick:V=>D(l.row)},{default:t(()=>e[16]||(e[16]=[n("重置密码",-1)])),_:2,__:[16]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Z,y.value]]),S("div",xe,[a(W,{"current-page":v.value,"onUpdate:currentPage":e[3]||(e[3]=l=>v.value=l),"page-size":w.value,"onUpdate:pageSize":e[4]||(e[4]=l=>w.value=l),"page-sizes":[10,20,50,100],total:T.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:L,onCurrentChange:O},null,8,["current-page","page-size","total"])]),a(Y,{modelValue:_.value,"onUpdate:modelValue":e[10]||(e[10]=l=>_.value=l),title:c.value==="add"?"新增用户":"编辑用户",width:"500px"},{footer:t(()=>[a(u,{onClick:e[9]||(e[9]=l=>_.value=!1)},{default:t(()=>e[19]||(e[19]=[n("取消",-1)])),_:1,__:[19]}),a(u,{type:"primary",onClick:I},{default:t(()=>e[20]||(e[20]=[n("确定",-1)])),_:1,__:[20]})]),default:t(()=>[a(x,{ref_key:"userFormRef",ref:b,model:s,rules:F,"label-width":"100px"},{default:t(()=>[a(d,{label:"手机号",prop:"phone"},{default:t(()=>[a(m,{modelValue:s.phone,"onUpdate:modelValue":e[5]||(e[5]=l=>s.phone=l),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),a(d,{label:"用户名",prop:"name"},{default:t(()=>[a(m,{modelValue:s.name,"onUpdate:modelValue":e[6]||(e[6]=l=>s.name=l),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),c.value==="add"?(C(),z(d,{key:0,label:"密码",prop:"password"},{default:t(()=>[a(m,{modelValue:s.password,"onUpdate:modelValue":e[7]||(e[7]=l=>s.password=l),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1})):me("",!0),a(d,{label:"角色"},{default:t(()=>[a(X,{modelValue:s.roleType,"onUpdate:modelValue":e[8]||(e[8]=l=>s.roleType=l)},{default:t(()=>[a(B,{label:1},{default:t(()=>e[17]||(e[17]=[n("超级管理员",-1)])),_:1,__:[17]}),a(B,{label:2},{default:t(()=>e[18]||(e[18]=[n("普通管理员",-1)])),_:1,__:[18]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const Ae=ee(Ue,[["__scopeId","data-v-97ccb850"]]);export{Ae as default};
