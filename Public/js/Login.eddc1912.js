import{_ as x}from"./_plugin-vue_export-helper.d6168fc5.js";/* empty css                     *//* empty css                    */import{d as y,r as _,a as V,o as k,c as E,b as n,e as r,w as s,f as M,E as I,u as F,g as S,h as f,i as B,l as C,j as L,k as c,m as u,n as R,p as q,q as z,s as N}from"./main.5e21a3e6.js";import{l as U}from"./auth.2a6d7dc6.js";/* empty css                   */const K={class:"login-container"},j={class:"login-form"},P=y({__name:"Login",setup(T){const g=F(),i=_(),p=_(!1),o=V({phone:"",password:"",rememberMe:!1}),h={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}]},d=async()=>{if(i.value)try{if(!await i.value.validate())return;p.value=!0;const e=await U({phone:o.phone,password:o.password});e.status?(localStorage.setItem("token",e.data),o.rememberMe?localStorage.setItem("phone",o.phone):localStorage.removeItem("phone"),u.success("登录成功"),g.push("/")):u.error(e.error||e.reason||"登录失败")}catch(t){console.error("登录失败:",t),u.error("网络错误，请稍后重试")}finally{p.value=!1}};return k(()=>{const t=localStorage.getItem("phone");t&&(o.phone=t,o.rememberMe=!0)}),(t,e)=>{const m=R,a=q,v=z,w=N,b=I;return S(),E("div",K,[n("div",j,[e[5]||(e[5]=n("div",{class:"login-header"},[n("h2",null,"后台管理系统"),n("p",{class:"text-muted"},"请登录您的账号")],-1)),r(b,{ref_key:"loginFormRef",ref:i,model:o,rules:h,onSubmit:M(d,["prevent"])},{default:s(()=>[r(a,{prop:"phone"},{default:s(()=>[r(m,{modelValue:o.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>o.phone=l),placeholder:"手机号",size:"large","prefix-icon":f(B)},null,8,["modelValue","prefix-icon"])]),_:1}),r(a,{prop:"password"},{default:s(()=>[r(m,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=l=>o.password=l),type:"password",placeholder:"密码",size:"large","prefix-icon":f(C),"show-password":"",onKeyup:L(d,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),r(a,null,{default:s(()=>[r(v,{modelValue:o.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=l=>o.rememberMe=l)},{default:s(()=>e[3]||(e[3]=[c(" 记住手机号 ",-1)])),_:1,__:[3]},8,["modelValue"])]),_:1}),r(a,null,{default:s(()=>[r(w,{type:"primary",size:"large",style:{width:"100%"},loading:p.value,onClick:d},{default:s(()=>e[4]||(e[4]=[c(" 登录 ",-1)])),_:1,__:[4]},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}});const O=x(P,[["__scopeId","data-v-819471fe"]]);export{O as default};
